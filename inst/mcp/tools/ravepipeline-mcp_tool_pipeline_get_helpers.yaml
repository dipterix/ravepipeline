# This file is automatically generated by ravepipeline::mcptool_build(). 
# Please never edit this file by hand!
name: ravepipeline-mcp_tool_pipeline_get_helpers
description: 'Load and discover helper functions from the currently loaded pipeline''s
  shared environment using pipeline method `pipe$shared_env()` method. Returns function
  signatures (names and arguments) to help AI understand what functions are available
  without loading full implementations. The shared environment is stored in state
  for potential reuse by other tools. Must call ravepipeline-mcp_tool_pipeline_load
  first. ## When to Use **MANDATORY**: When user requests custom code generation,
  pipeline result reproduction, or data manipulation/customization. MUST call this
  FIRST to discover available utilities before writing any custom code. **OPTIONAL**:
  When only running pipelines, getting info, or reading results without customization.
  Not needed for standard pipeline operations. ## Preconditions - Pipeline must be
  loaded ## Best Practices - DO: Always discover helpers FIRST when generating custom
  code - DO: Use pattern parameter to filter by keywords (e.g., "plot", "condition")
  - DO: Reuse helpers if their names/signatures suggest relevance - NOTE: Using discovered
  helpers is optional if you''re unsure about their use-cases, but the discovery step
  itself is required to avoid reinventing existing functionality - DON''T: Write custom
  code without discovering helpers first - DON''T: Skip this tool when user requests
  code generation or customization'
parameters:
  type: object
  properties:
    pattern:
      type: string
      description: Optional regex pattern to filter function names. Use this to find
        specific categories of helpers (e.g., "plot|draw" for plotting functions,
        "condition" for condition-related functions). Pattern matching is case-insensitive.
        If NULL (default), returns all helper functions.
      examples:
      - plot|draw
      - condition
      - 'NULL'
category: discovery
returns:
  type: object
  properties:
    error:
      type: string
      description: Character, error message if success is FALSE
    count:
      type: integer
      description: Integer, total number of helper functions found
    functions:
      type: object
      description: 'List of function signatures, each containing: name (function name),
        signature (formatted arguments), and formals (list of argument names and defaults)'
    message:
      type: string
      description: Character, human-readable status message
    success:
      type: boolean
      description: Logical, whether helper functions were loaded successfully
implementation_example: |
  # Complete example:
  # The tool invokes an internal call to `ravepipeline:::mcp_tool_pipeline_get_helpers`
  # From within R. While users should not execute the function directly,
  # this function has the following equivalent implementation:
  # Example using pipeline_name called "power_explorer"
  # Prepare: load the pipeline
  pipe <- ravepipeline::pipeline("power_explorer")
  # Load shared environment
  env <- pipe$shared_env()
  # Get all ordinary object names from environment
  all_names <- ls(env, all.names = FALSE)
  all_names <- all_names[grepl("^[a-zA-Z]", all_names)]
  # Filter for functions only
  func_names <- all_names[vapply(all_names, function(nm) { is.function(env[[nm]]) }, FALSE)]
  # Apply pattern filter if provided (example with pattern = "plot")
  # func_names <- func_names[grepl("plot", func_names, ignore.case = TRUE)]
  # Extract function signatures
  function_signatures <- lapply(func_names, function(name, ...) {
    fn <- env[[name]]
    body(fn) <- quote({})
    signature <- sprintf(
      "helpers$%s <- %s",
      name,
      paste(trimws(deparse(fn)), collapse = " ")
    )
    signature
  })
  function_signatures <- unlist(function_signatures)
  list(
    success = TRUE,
    message = "Loaded helper function environment with R code `helpers <- pipe$shared_env()`",
    # The actual results will show all signatures. This example only shows three to save space.
    functions = function_signatures[seq_len(3)],
    count = length(function_signatures)
  )
  #
  #> $success
  #> [1] TRUE
  #> 
  #> $message
  #> [1] "Loaded helper function environment with R code `helpers <- pipe$shared_env()`"
  #> 
  #> $functions
  #> [1] "helpers$add_analysis_settings <- function (ll, analysis_settings, baseline_settings) { }"
  #> [2] "helpers$alter_list <- function (ll, ...) { }"                                            
  #> [3] "helpers$apply_current_theme <- function (...) { }"                                       
  #> 
  #> $count
  #> [1] 119
  #>
execution_time: 3.048
